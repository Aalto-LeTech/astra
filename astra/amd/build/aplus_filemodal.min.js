/**
 * A+ file modal as an AMD module for Moodle.
 * In an HTML page, run the following Javascript code once to enable this
 * file modal plugin:
 * $('.file-modal').aplusFileModal();
 * 
 * Source: A+ (a-plus/assets/js/aplus.js)
 * License: GNU GPL v3
 * 
 * @module mod_astra/aplus_filemodal
 */
define(["jquery","mod_astra/highlight","theme_bootstrapbase/bootstrap"],function(a,b){return function(a,c,d,e){"use strict";function f(b,c){this.element=a(b),this.settings=a.extend({},h,c),this.init()}var g="aplusFileModal",h={modal_selector:"#default-modal",title_selector:".modal-title",content_selector:".modal-body"};a.extend(f.prototype,{init:function(){var c=this.element,d=this.settings;c.on("click",function(e){e.preventDefault(),a.get(c.attr("href"),function(e){var f=a(d.modal_selector),g=a("<pre/>").text(e);f.find(d.title_selector).text(c.text()),f.find(d.content_selector).html(g),b.highlightBlock(g[0]);for(var h=g.html().split(/\r\n|\r|\n/g),i=a("<table/>").addClass("src"),j=1;j<=h.length;j++)i.append('<tr><td class="num unselectable">'+j+'</td><td class="src">'+h[j-1]+"</td></tr>");g.html(i),f.modal("show")})})}}),a.fn[g]=function(b){return this.each(function(){a.data(this,"plugin_"+g)||a.data(this,"plugin_"+g,new f(this,b))})}}(a,window,document),{}});