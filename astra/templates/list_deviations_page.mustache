{{!
List deadline and submission limit deviations in a course.
Derived from A+ (a-plus/deviations/templates/deviations/list_dl.html).

Context variables:
* add_new_dl_deviation_url (string) URL for adding a new deadline deviation
* dl_deviations (array of objects), each object has fields 
    - submitter (string) in the format "full name (student id)"
    - exercise_name (string)
    - extra_minutes (int)
    - without_late_penalty (string) "true" or "false"
    - remove_url (string) URL for deleting the deviation
* add_new_sbms_limit_url (string) URL for adding a new submission limit deviation
* sbms_limit_deviations (array of objects), each object has fields
    - submitter (string) in the format "full name (student id)"
    - exercise_name (string)
    - extra_submissions (int)
    - remove_url (string) URL for deleting the deviation
}}

<p>
    <a class="btn btn-primary btn-sm" href="{{{ add_new_dl_deviation_url }}}">
        {{#pix}}i/duration{{/pix}}
        {{#str}} addnewdldeviations, mod_astra {{/str}}
    </a>
</p>
<div class="card border-primary">
    <h4 class="card-header bg-primary">{{#str}} dldeviations, mod_astra {{/str}}</h4>
    <table class="table table-striped table-bordered table-sm">
        <tr>
            <th>{{#str}} submitter, mod_astra {{/str}}</th>
            <th>{{#str}} exercisename, mod_astra {{/str}}</th>
            <th>{{#str}} extraminutes, mod_astra {{/str}}</th>
            <th>{{#str}} withoutlatepenalty, mod_astra {{/str}}</th>
            <th>{{#str}} actions, mod_astra {{/str}}</th>
        </tr>
        {{# dl_deviations }}
        <tr>
            <td>{{ submitter }}</td>
            <td>{{ exercise_name }}</td>
            <td>{{ extra_minutes }}</td>
            <td>{{ without_late_penalty }}</td>
            <td>
                <form method="post" action="{{{ remove_url }}}">
                    <button type="submit" class="btn btn-secondary btn-sm">
                        {{#pix}}t/delete{{/pix}}
                        {{#str}} remove, mod_astra {{/str}}
                    </button>
                </form>
            </td>
        </tr>
        {{/ dl_deviations }}
        {{^ dl_deviations }}
        <tr>
            <td colspan="5">{{#str}} nodldeviations, mod_astra {{/str}}</td>
        </tr>
        {{/ dl_deviations }}
    </table>
</div>

{{! submission limit deviations }}
<p>
    <a class="btn btn-primary btn-sm" href="{{{ add_new_sbms_limit_url }}}">
        {{#pix}}t/copy{{/pix}}
        {{#str}} addnewsbmslimitdeviations, mod_astra {{/str}}
    </a>
</p>
<div class="card border-primary">
    <h4 class="card-header bg-primary">{{#str}} submitlimitdeviations, mod_astra {{/str}}</h4>
    <table class="table table-striped table-bordered table-sm">
        <tr>
            <th>{{#str}} submitter, mod_astra {{/str}}</th>
            <th>{{#str}} exercisename, mod_astra {{/str}}</th>
            <th>{{#str}} extrasubmissions, mod_astra {{/str}}</th>
            <th>{{#str}} actions, mod_astra {{/str}}</th>
        </tr>
        {{# sbms_limit_deviations }}
        <tr>
            <td>{{ submitter }}</td>
            <td>{{ exercise_name }}</td>
            <td>{{ extra_submissions }}</td>
            <td>
                <form method="post" action="{{{ remove_url }}}">
                    <button type="submit" class="btn btn-secondary btn-sm">
                        {{#pix}}t/delete{{/pix}}
                        {{#str}} remove, mod_astra {{/str}}
                    </button>
                </form>
            </td>
        </tr>
        {{/ sbms_limit_deviations }}
        {{^ sbms_limit_deviations }}
        <tr>
            <td colspan="4">{{#str}} nosbmslimitdeviations, mod_astra {{/str}}</td>
        </tr>
        {{/ sbms_limit_deviations }}
    </table>
</div>
